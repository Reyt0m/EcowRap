<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>EcowRap</title>
  </head>
  <link rel="stylesheet" href="../assets/css/index.css">

  <!-- JS読み込み -->
  <script src="../src/App.js" ></script>

  
  <!-- A-Frame ライブラリの読み込み -->
  <script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
  <!-- AR.js ライブラリの読み込み -->
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.2.0/aframe/build/aframe-ar.js"></script>
  <!-- Jqueryの読み込み -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> 
  <!-- qrcode化ライブラリの読み込み -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script> 

  
  <a-scene>
    <a-assets>
      <canvas id="canvas"></canvas>
    </a-assets>
  </a-scene>
  <script>
    AFRAME.registerComponent('plane', {
      init: function () {
        this.canvas = document.getElementById('canvas');
        this.ctx = canvas.getContext('2d');
      },
      tick: function () {
        const material = this.el.getObject3D('mesh').material;
        const fontSize = 24;
  
        this.canvas.width = this.canvas.width;
        this.canvas.height = this.canvas.height;
  
        this.ctx.save();
          this.ctx.font = `${fontSize}px sans-serif`;
          this.ctx.fillText(Date.now(), 0, fontSize);
        this.ctx.restore();
  
        if (!material.map) {
          return;
        }
  
        material.map.needsUpdate = true;
      }
    });
  
    const plane = document.createElement('a-plane');
  
    plane.setAttribute('plane', 'plane');
    plane.setAttribute('material', 'shader: flat; src: #canvas;');
  
    document.getElementsByTagName('a-scene')[0].appendChild(plane);
  </script>


  </body>

</html>